<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Usuário</title>
    <style>
        /* Estilos como no código anterior */
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
            background: url('https://www.folhape.com.br/imagem/folhape/esportes/855x497/20220822101537561454d1.jpg') no-repeat center center fixed;
            background-size: cover;
            position: relative;
            overflow: hidden;
        }

        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(75, 0, 130, 0.5);
            z-index: 1;
        }

        .container {
            background-color: #fff;
            padding: 30px 40px;
            border-radius: 8px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
            text-align: center;
            position: relative;
            z-index: 2;
        }

        h2 {
            color: #333;
            margin-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-group label {
            display: block;
            font-size: 14px;
            color: #333;
            margin-bottom: 5px;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            color: #333;
        }

        .form-group input:focus {
            border-color: #ff4081;
            outline: none;
        }

        .error-message {
            color: #ff0000;
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }

        .button {
            width: 100%;
            padding: 12px;
            background-color: #ff4081;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            color: #fff;
            cursor: pointer;
        }

        .button:hover {
            background-color: #e0356d;
        }

        .back-link {
            display: block;
            margin-top: 20px;
            font-size: 14px;
            color: #666;
            text-decoration: none;
        }

        .back-link:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container" id="step1">
        <h2>Cadastro - Dados Pessoais</h2>
        <form id="personalForm">
            <div class="form-group">
                <label for="cpf">CPF</label>
                <input type="text" id="cpf" placeholder="Digite seu CPF" maxlength="14" required>
                <div class="error-message" id="cpfError">CPF inválido. Digite apenas números com 11 dígitos.</div>
            </div>
            <div class="form-group">
                <label for="nome">Nome Completo</label>
                <input type="text" id="nome" placeholder="Digite seu nome completo" maxlength="256" required>
                <div class="error-message" id="nomeError">Nome inválido (máx. 256 caracteres).</div>
            </div>
            <div class="form-group">
                <label for="email">E-mail</label>
                <input type="email" id="email" placeholder="Digite seu e-mail" required>
            </div>
            <div class="form-group">
                <label for="confirmEmail">Confirme o E-mail</label>
                <input type="email" id="confirmEmail" placeholder="Confirme seu e-mail" required>
                <div class="error-message" id="emailError">Os e-mails não correspondem.</div>
            </div>
            <div class="form-group">
                <label for="telefone">Telefone</label>
                <input type="tel" id="telefone" placeholder="Digite seu telefone" required>
                <div class="error-message" id="telefoneError">Telefone inválido.</div>
            </div>
            <button type="button" class="button" onclick="validateStep1()">Próxima</button><br><br>
            <a href="home.html">Página inicial</a>
        </form>
    </div>

    <div class="container" id="step2" style="display:none;">
        <h2>Cadastro - Criar Senha</h2>
        <p>Agora cadastre uma senha de acesso</p>
        <p>A sua senha deve ter:</p>
        <ul>
            <li>6 dígitos numéricos</li>
            <li>Não pode conter sequências ou repetições</li>
            <li>Não pode incluir sua data de nascimento</li>
        </ul>
        <form id="passwordForm">
            <div class="form-group">
                <label for="senha">Senha</label>
                <input type="password" id="senha" placeholder="Digite uma senha numérica de 6 dígitos" required>
                <div class="error-message" id="senhaError">Senha inválida.</div>
            </div>
            <button type="button" class="button" onclick="validateStep2()">Concluir Cadastro</button>
            <a href="#" class="back-link" onclick="goToStep(1)">Voltar</a>
        </form>
    </div>

    <script>
        const cpfInput = document.getElementById('cpf');
        const nomeInput = document.getElementById('nome');
        const telefoneInput = document.getElementById('telefone');

        // Permitir apenas números e limitar a 11 caracteres para o CPF
        cpfInput.addEventListener('input', function() {
            this.value = this.value.replace(/\D/g, '').slice(0, 11); // Limita a apenas números e 11 dígitos
        });

        // Adicionar máscara de CPF ao sair do campo
        cpfInput.addEventListener('blur', function() {
            const cpf = this.value;
            if (cpf.length === 11) {
                this.value = cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, "$1.$2.$3-$4");
            }
        });

        // Validar CPF
        function validateCPF(cpf) {
            const cpfRegex = /^\d{3}\.\d{3}\.\d{3}-\d{2}$/; // Regex para CPF formatado
            return cpfRegex.test(cpf);
        }

// Permitir apenas letras (com acentos) e espaços no campo Nome
nomeInput.addEventListener('input', function() {
    // Converte o texto para maiúsculo e remove caracteres inválidos (não letras, acentos e espaços)
    this.value = this.value.toUpperCase().replace(/[^A-Za-zÀ-ÿ\s]/g, '').slice(0, 256);
});

        

        telefoneInput.addEventListener('input', function() {
            // Remove tudo o que não for número
            let value = this.value.replace(/\D/g, '');
        
            // Limita a 11 caracteres numéricos
            if (value.length > 11) {
                value = value.slice(0, 11);
            }
        
            // Aplica a máscara para o formato (XX) XXXXX-XXXX ou (XX) XXXX-XXXX
            if (value.length <= 10) {
                value = value.replace(/(\d{2})(\d{4})(\d{4})/, "($1) $2-$3");
            } else {
                value = value.replace(/(\d{2})(\d{5})(\d{4})/, "($1) $2-$3");
            }
        
            // Atualiza o campo de telefone com a máscara
            this.value = value;
        });

        function validateStep1() {
            const cpf = cpfInput.value;
            const nome = nomeInput.value;
            const email = document.getElementById('email').value;
            const confirmEmail = document.getElementById('confirmEmail').value;
            const telefone = telefoneInput.value;

            let isValid = true;

            // Validação CPF
            document.getElementById('cpfError').style.display = validateCPF(cpf) ? 'none' : 'block';
            isValid = isValid && validateCPF(cpf);

            // Validação Nome
            document.getElementById('nomeError').style.display = nome.length > 0 && nome.length <= 256 ? 'none' : 'block';
            isValid = isValid && nome.length > 0 && nome.length <= 256;

            // Validação Email
            document.getElementById('emailError').style.display = (validateEmail(email) && email === confirmEmail) ? 'none' : 'block';
            isValid = isValid && validateEmail(email) && email === confirmEmail;

            // Validação Telefone
            document.getElementById('telefoneError').style.display = validateTelefone(telefone) ? 'none' : 'block';
            isValid = isValid && validateTelefone(telefone);

            if (isValid) goToStep(2);
        }

        function validateStep2() {
            const senha = document.getElementById('senha').value;
            const isSequential = /^(?:(\d)\1+|123456|654321)$/.test(senha);
            const isRepeated = /^(\d)\1{5}$/.test(senha);
            const isValidLength = senha.length === 6 && /^\d+$/.test(senha);
        
            document.getElementById('senhaError').style.display = (!isSequential && !isRepeated && isValidLength) ? 'none' : 'block';
        
            if (!isSequential && !isRepeated && isValidLength) {
                alert('Cadastro concluído com sucesso!');
                window.location.href = 'C:\Users\Aluno\Documents\Curso Python Henrique\banco_turma_noite_senac\templates\accounts\home.html';  // Redireciona para home.html
            }
        }
        

        function goToStep(step) {
            document.getElementById('step1').style.display = step === 1 ? 'block' : 'none';
            document.getElementById('step2').style.display = step === 2 ? 'block' : 'none';
        }

        function validateEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        function validateTelefone(telefone) {
            return telefone.length >= 10 && telefone.length <= 11;
        }
    </script>
</body>
</html>
